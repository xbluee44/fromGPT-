<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Social Media Downloader - FormGPT</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Space+Grotesk:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary-bg: #1a1a1a;
            --secondary-bg: #f8f9fa;
            --accent-blue: #0066ff;
            --success-green: #10b981;
            --warning-orange: #f59e0b;
            --error-red: #ef4444;
            --neutral-gray: #6b7280;
            --text-light: #f8f9fa;
        }
        
        body {
            font-family: 'Inter', sans-serif;
            background: var(--primary-bg);
            color: var(--text-light);
        }
        
        .gradient-text {
            background: linear-gradient(135deg, #0066ff, #00ccff);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        .glass-effect {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        .platform-card {
            transition: all 0.3s ease;
            cursor: pointer;
        }
        
        .platform-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 20px 40px rgba(0, 102, 255, 0.2);
        }
        
        .platform-card.selected {
            border-color: var(--accent-blue);
            background: rgba(0, 102, 255, 0.1);
        }
        
        .download-item {
            animation: slideIn 0.3s ease-out;
        }
        
        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateX(-20px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }
        
        .progress-bar {
            transition: width 0.3s ease;
        }
        
        .url-input {
            background: rgba(26, 26, 26, 0.95);
            border: 2px solid rgba(0, 102, 255, 0.3);
            transition: all 0.3s ease;
        }
        
        .url-input:focus {
            border-color: var(--accent-blue);
            box-shadow: 0 0 0 3px rgba(0, 102, 255, 0.1);
        }
        
        .download-btn {
            background: linear-gradient(135deg, #0066ff, #0052cc);
            transition: all 0.3s ease;
        }
        
        .download-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(0, 102, 255, 0.3);
        }
        
        .download-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }
    </style>
</head>
<body>
    <!-- Navigation -->
    <nav class="fixed top-0 left-0 right-0 z-50 glass-effect">
        <div class="max-w-7xl mx-auto px-6 py-4">
            <div class="flex items-center justify-between">
                <div class="flex items-center space-x-4">
                    <img src="resources/formgpt-logo.png" alt="FormGPT" class="w-10 h-10">
                    <h1 class="text-2xl font-bold font-space-grotesk gradient-text">FormGPT</h1>
                </div>
                <div class="hidden md:flex items-center space-x-8">
                    <a href="index.html" class="text-white hover:text-blue-400 transition-colors">Dashboard</a>
                    <a href="downloader.html" class="text-blue-400 font-semibold">Downloader</a>
                    <a href="builder.html" class="text-white hover:text-blue-400 transition-colors">AI Builder</a>
                    <a href="login.html" class="text-white hover:text-blue-400 transition-colors">Login</a>
                </div>
            </div>
        </div>
    </nav>

    <!-- Hero Section -->
    <section class="pt-24 pb-12 bg-gradient-to-br from-gray-900 via-gray-800 to-gray-900">
        <div class="max-w-7xl mx-auto px-6">
            <div class="text-center mb-12">
                <h2 class="text-4xl lg:text-6xl font-bold font-space-grotesk mb-6">
                    <span class="gradient-text">Social Media Downloader</span>
                </h2>
                <p class="text-xl text-gray-300 max-w-3xl mx-auto">
                    Download content from your favorite social media platforms with ease. 
                    Support for TikTok, YouTube, Spotify, and Instagram.
                </p>
            </div>
        </div>
    </section>

    <!-- Platform Selection -->
    <section class="py-16 bg-gray-900">
        <div class="max-w-7xl mx-auto px-6">
            <div class="text-center mb-12">
                <h3 class="text-3xl font-bold mb-4">Choose Platform</h3>
                <p class="text-gray-400">Select the platform you want to download content from</p>
            </div>
            
            <div class="grid md:grid-cols-2 lg:grid-cols-4 gap-6 mb-12">
                <div class="platform-card bg-gray-800 rounded-xl p-6 border-2 border-transparent" data-platform="tiktok">
                    <div class="text-center">
                        <div class="w-16 h-16 bg-black rounded-xl mx-auto mb-4 flex items-center justify-center">
                            <svg class="w-8 h-8 text-white" fill="currentColor" viewBox="0 0 24 24">
                                <path d="M12.525.02c1.31-.02 2.61-.01 3.91-.02.08 1.53.63 3.09 1.75 4.17 1.12 1.11 2.7 1.62 4.24 1.79v4.03c-1.44-.05-2.89-.35-4.2-.97-.57-.26-1.1-.59-1.62-.93-.01 2.92.01 5.84-.02 8.75-.08 1.4-.54 2.79-1.35 3.94-1.31 1.92-3.58 3.17-5.91 3.21-1.43.08-2.86-.31-4.08-1.03-2.02-1.19-3.44-3.37-3.65-5.71-.02-.5-.03-1-.01-1.49.18-1.9 1.12-3.72 2.58-4.96 1.66-1.44 3.98-2.13 6.15-1.72.02 1.48-.04 2.96-.04 4.44-.99-.32-2.15-.23-3.02.37-.63.41-1.11 1.04-1.36 1.75-.21.51-.15 1.07-.14 1.61.24 1.64 1.82 3.02 3.5 2.87 1.12-.01 2.19-.66 2.77-1.61.19-.33.4-.67.41-1.06.1-1.79.06-3.57.07-5.36.01-4.03-.01-8.05.02-12.07z"/>
                            </svg>
                        </div>
                        <h4 class="text-xl font-semibold mb-2">TikTok</h4>
                        <p class="text-gray-400 text-sm">Download TikTok videos without watermark</p>
                    </div>
                </div>

                <div class="platform-card bg-gray-800 rounded-xl p-6 border-2 border-transparent" data-platform="youtube">
                    <div class="text-center">
                        <div class="w-16 h-16 bg-red-600 rounded-xl mx-auto mb-4 flex items-center justify-center">
                            <svg class="w-8 h-8 text-white" fill="currentColor" viewBox="0 0 24 24">
                                <path d="M23.498 6.186a3.016 3.016 0 0 0-2.122-2.136C19.505 3.545 12 3.545 12 3.545s-7.505 0-9.377.505A3.017 3.017 0 0 0 .502 6.186C0 8.07 0 12 0 12s0 3.93.502 5.814a3.016 3.016 0 0 0 2.122 2.136c1.871.505 9.376.505 9.376.505s7.505 0 9.377-.505a3.015 3.015 0 0 0 2.122-2.136C24 15.93 24 12 24 12s0-3.93-.502-5.814zM9.545 15.568V8.432L15.818 12l-6.273 3.568z"/>
                            </svg>
                        </div>
                        <h4 class="text-xl font-semibold mb-2">YouTube</h4>
                        <p class="text-gray-400 text-sm">Download videos and audio in multiple formats</p>
                    </div>
                </div>

                <div class="platform-card bg-gray-800 rounded-xl p-6 border-2 border-transparent" data-platform="spotify">
                    <div class="text-center">
                        <div class="w-16 h-16 bg-green-600 rounded-xl mx-auto mb-4 flex items-center justify-center">
                            <svg class="w-8 h-8 text-white" fill="currentColor" viewBox="0 0 24 24">
                                <path d="M12 0C5.4 0 0 5.4 0 12s5.4 12 12 12 12-5.4 12-12S18.66 0 12 0zm5.521 17.34c-.24.359-.66.48-1.021.24-2.82-1.74-6.36-2.101-10.561-1.141-.418.101-.899-.179-.899-.621 0-.359.24-.66.539-.78 4.56-1.021 8.52-.6 11.64 1.32.42.18.479.659.301 1.02zm1.44-3.3c-.301.42-.841.6-1.262.3-3.239-1.98-8.159-2.58-11.939-1.38-.479.12-1.02-.12-1.14-.6-.12-.48.12-1.021.6-1.141C9.6 9.9 15 10.561 18.72 12.84c.361.181.54.78.241 1.2zm.12-3.36C15.24 8.4 8.82 8.16 5.16 9.301c-.6.179-1.2-.181-1.38-.721-.18-.601.18-1.2.72-1.381 4.26-1.26 11.28-1.02 15.721 1.621.539.3.719 1.02.42 1.56-.299.421-1.02.599-1.559.3z"/>
                            </svg>
                        </div>
                        <h4 class="text-xl font-semibold mb-2">Spotify</h4>
                        <p class="text-gray-400 text-sm">Download music tracks and playlists</p>
                    </div>
                </div>

                <div class="platform-card bg-gray-800 rounded-xl p-6 border-2 border-transparent" data-platform="instagram">
                    <div class="text-center">
                        <div class="w-16 h-16 bg-gradient-to-br from-purple-600 to-pink-600 rounded-xl mx-auto mb-4 flex items-center justify-center">
                            <svg class="w-8 h-8 text-white" fill="currentColor" viewBox="0 0 24 24">
                                <path d="M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.163 6.162 6.163 6.162-2.759 6.162-6.163c0-3.403-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4 0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.21-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795 0 1.439-.645 1.439-1.44s-.644-1.44-1.439-1.44z"/>
                            </svg>
                        </div>
                        <h4 class="text-xl font-semibold mb-2">Instagram</h4>
                        <p class="text-gray-400 text-sm">Download posts, stories, and reels</p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- URL Input Section -->
    <section class="py-16 bg-gray-800">
        <div class="max-w-4xl mx-auto px-6">
            <div class="text-center mb-12">
                <h3 class="text-3xl font-bold mb-4">Enter URL</h3>
                <p class="text-gray-400">Paste the link to the content you want to download</p>
            </div>
            
            <div class="bg-gray-900 rounded-2xl p-8">
                <div class="space-y-6">
                    <div>
                        <label class="block text-sm font-medium mb-2">Content URL</label>
                        <input 
                            type="url" 
                            id="url-input" 
                            placeholder="https://www.tiktok.com/@username/video/1234567890"
                            class="url-input w-full px-4 py-3 rounded-lg text-white placeholder-gray-500 focus:outline-none"
                        >
                    </div>
                    
                    <div class="grid md:grid-cols-2 gap-6">
                        <div>
                            <label class="block text-sm font-medium mb-2">Format</label>
                            <select id="format-select" class="url-input w-full px-4 py-3 rounded-lg text-white focus:outline-none">
                                <option value="auto">Auto (Best Quality)</option>
                                <option value="mp4">MP4 Video</option>
                                <option value="mp3">MP3 Audio</option>
                                <option value="jpg">JPEG Image</option>
                            </select>
                        </div>
                        
                        <div>
                            <label class="block text-sm font-medium mb-2">Quality</label>
                            <select id="quality-select" class="url-input w-full px-4 py-3 rounded-lg text-white focus:outline-none">
                                <option value="best">Best Available</option>
                                <option value="1080p">1080p HD</option>
                                <option value="720p">720p HD</option>
                                <option value="480p">480p SD</option>
                            </select>
                        </div>
                    </div>
                    
                    <button 
                        id="download-btn" 
                        class="download-btn w-full py-4 text-white font-semibold rounded-lg disabled:opacity-50 disabled:cursor-not-allowed"
                        disabled
                    >
                        <span class="flex items-center justify-center space-x-2">
                            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"/>
                            </svg>
                            <span>Download Content</span>
                        </span>
                    </button>
                </div>
            </div>
        </div>
    </section>

    <!-- Download Queue -->
    <section class="py-16 bg-gray-900">
        <div class="max-w-6xl mx-auto px-6">
            <div class="flex items-center justify-between mb-8">
                <h3 class="text-3xl font-bold">Download Queue</h3>
                <button id="clear-queue" class="text-gray-400 hover:text-white transition-colors">
                    Clear All
                </button>
            </div>
            
            <div id="download-queue" class="space-y-4">
                <!-- Download items will be added here -->
                <div class="text-center text-gray-500 py-12">
                    <svg class="w-16 h-16 mx-auto mb-4 opacity-50" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"/>
                    </svg>
                    <p>No downloads in queue</p>
                    <p class="text-sm mt-2">Add a URL above to start downloading</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Download History -->
    <section class="py-16 bg-gray-800">
        <div class="max-w-6xl mx-auto px-6">
            <div class="flex items-center justify-between mb-8">
                <h3 class="text-3xl font-bold">Recent Downloads</h3>
                <button id="clear-history" class="text-gray-400 hover:text-white transition-colors">
                    Clear History
                </button>
            </div>
            
            <div id="download-history" class="grid md:grid-cols-2 lg:grid-cols-3 gap-6">
                <!-- History items will be added here -->
                <div class="text-center text-gray-500 py-12 col-span-full">
                    <svg class="w-16 h-16 mx-auto mb-4 opacity-50" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"/>
                    </svg>
                    <p>No download history</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="bg-black py-12">
        <div class="max-w-7xl mx-auto px-6">
            <div class="text-center">
                <div class="flex items-center justify-center space-x-4 mb-4">
                    <img src="resources/formgpt-logo.png" alt="FormGPT" class="w-8 h-8">
                    <h3 class="text-2xl font-bold font-space-grotesk gradient-text">FormGPT</h3>
                </div>
                <p class="text-gray-400 mb-4">Powered by Advanced AI • 2025</p>
                <p class="text-sm text-gray-500">© 2025 FormGPT. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <script>
        // Downloader functionality
        class MediaDownloader {
            constructor() {
                this.selectedPlatform = null;
                this.downloadHistory = this.loadHistory();
                this.init();
            }

            init() {
                this.initEventListeners();
                this.updateHistoryDisplay();
            }

            initEventListeners() {
                // Platform selection
                document.querySelectorAll('.platform-card').forEach(card => {
                    card.addEventListener('click', () => this.selectPlatform(card.dataset.platform));
                });

                // URL input
                const urlInput = document.getElementById('url-input');
                const downloadBtn = document.getElementById('download-btn');
                
                urlInput.addEventListener('input', () => this.validateInput());
                downloadBtn.addEventListener('click', () => this.startDownload());

                // Clear buttons
                document.getElementById('clear-queue').addEventListener('click', () => this.clearQueue());
                document.getElementById('clear-history').addEventListener('click', () => this.clearHistory());
            }

            selectPlatform(platform) {
                this.selectedPlatform = platform;
                
                // Update UI
                document.querySelectorAll('.platform-card').forEach(card => {
                    card.classList.remove('selected');
                });
                document.querySelector(`[data-platform="${platform}"]`).classList.add('selected');
                
                // Update placeholder
                const placeholders = {
                    tiktok: 'https://www.tiktok.com/@username/video/1234567890',
                    youtube: 'https://www.youtube.com/watch?v=videoID',
                    spotify: 'https://open.spotify.com/track/trackID',
                    instagram: 'https://www.instagram.com/p/postID'
                };
                
                document.getElementById('url-input').placeholder = placeholders[platform];
                this.validateInput();
            }

            validateInput() {
                const urlInput = document.getElementById('url-input');
                const downloadBtn = document.getElementById('download-btn');
                
                const hasValidURL = urlInput.value.trim() !== '' && this.isValidURL(urlInput.value);
                const hasPlatform = this.selectedPlatform !== null;
                
                downloadBtn.disabled = !(hasValidURL && hasPlatform);
            }

            isValidURL(url) {
                try {
                    new URL(url);
                    return true;
                } catch {
                    return false;
                }
            }

            async startDownload() {
                const url = document.getElementById('url-input').value.trim();
                const format = document.getElementById('format-select').value;
                const quality = document.getElementById('quality-select').value;
                
                const downloadItem = {
                    id: Date.now(),
                    url: url,
                    platform: this.selectedPlatform,
                    format: format,
                    quality: quality,
                    status: 'pending',
                    progress: 0,
                    timestamp: new Date().toISOString()
                };

                this.addToQueue(downloadItem);
                this.processDownload(downloadItem);
            }

            addToQueue(item) {
                const queueContainer = document.getElementById('download-queue');
                
                // Clear empty state
                if (queueContainer.querySelector('.text-center')) {
                    queueContainer.innerHTML = '';
                }

                const itemElement = this.createQueueItem(item);
                queueContainer.appendChild(itemElement);
            }

            createQueueItem(item) {
                const div = document.createElement('div');
                div.className = 'download-item bg-gray-800 rounded-lg p-4 border border-gray-700';
                div.id = `download-${item.id}`;

                const platformColors = {
                    tiktok: 'bg-black',
                    youtube: 'bg-red-600',
                    spotify: 'bg-green-600',
                    instagram: 'bg-gradient-to-br from-purple-600 to-pink-600'
                };

                div.innerHTML = `
                    <div class="flex items-center justify-between mb-3">
                        <div class="flex items-center space-x-3">
                            <div class="w-8 h-8 ${platformColors[item.platform]} rounded flex items-center justify-center">
                                <span class="text-xs font-bold text-white">${item.platform.charAt(0).toUpperCase()}</span>
                            </div>
                            <div>
                                <h4 class="font-semibold text-sm">${item.platform.charAt(0).toUpperCase() + item.platform.slice(1)} Download</h4>
                                <p class="text-xs text-gray-400">${item.format.toUpperCase()} • ${item.quality.toUpperCase()}</p>
                            </div>
                        </div>
                        <div class="text-right">
                            <span class="status text-sm font-medium capitalize">${item.status}</span>
                            <button class="ml-2 text-red-400 hover:text-red-300" onclick="downloader.removeFromQueue(${item.id})">
                                <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                                    <path d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z"/>
                                </svg>
                            </button>
                        </div>
                    </div>
                    <div class="progress-container">
                        <div class="w-full bg-gray-700 rounded-full h-2">
                            <div class="progress-bar bg-blue-600 h-2 rounded-full" style="width: 0%"></div>
                        </div>
                        <div class="flex justify-between text-xs text-gray-400 mt-1">
                            <span class="progress-text">0%</span>
                            <span class="time-remaining">Calculating...</span>
                        </div>
                    </div>
                `;

                return div;
            }

            async processDownload(item) {
                const itemElement = document.getElementById(`download-${item.id}`);
                const progressBar = itemElement.querySelector('.progress-bar');
                const progressText = itemElement.querySelector('.progress-text');
                const timeRemaining = itemElement.querySelector('.time-remaining');
                const statusElement = itemElement.querySelector('.status');

                // Update status
                statusElement.textContent = 'processing';
                statusElement.className = 'status text-sm font-medium capitalize text-yellow-400';

                // Simulate download progress
                for (let progress = 0; progress <= 100; progress += Math.random() * 15) {
                    progressBar.style.width = `${Math.min(progress, 100)}%`;
                    progressText.textContent = `${Math.min(Math.round(progress), 100)}%`;
                    
                    const remaining = Math.max(0, 100 - progress);
                    timeRemaining.textContent = remaining > 0 ? `${Math.ceil(remaining / 10)}s remaining` : 'Completing...';
                    
                    await new Promise(resolve => setTimeout(resolve, 200 + Math.random() * 300));
                }

                // Complete download
                statusElement.textContent = 'completed';
                statusElement.className = 'status text-sm font-medium capitalize text-green-400';
                progressText.textContent = '100%';
                timeRemaining.textContent = 'Completed';

                // Add to history
                item.status = 'completed';
                item.progress = 100;
                this.addToHistory(item);

                // Show notification
                if (window.formGPT) {
                    window.formGPT.showNotification(`${item.platform.charAt(0).toUpperCase() + item.platform.slice(1)} download completed!`, 'success');
                }
            }

            addToHistory(item) {
                this.downloadHistory.unshift(item);
                if (this.downloadHistory.length > 20) {
                    this.downloadHistory = this.downloadHistory.slice(0, 20);
                }
                this.saveHistory();
                this.updateHistoryDisplay();
            }

            updateHistoryDisplay() {
                const historyContainer = document.getElementById('download-history');
                
                if (this.downloadHistory.length === 0) {
                    historyContainer.innerHTML = `
                        <div class="text-center text-gray-500 py-12 col-span-full">
                            <svg class="w-16 h-16 mx-auto mb-4 opacity-50" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"/>
                            </svg>
                            <p>No download history</p>
                        </div>
                    `;
                    return;
                }

                historyContainer.innerHTML = this.downloadHistory.map(item => this.createHistoryItem(item)).join('');
            }

            createHistoryItem(item) {
                const platformColors = {
                    tiktok: 'bg-black',
                    youtube: 'bg-red-600',
                    spotify: 'bg-green-600',
                    instagram: 'bg-gradient-to-br from-purple-600 to-pink-600'
                };

                const date = new Date(item.timestamp).toLocaleDateString();
                const time = new Date(item.timestamp).toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });

                return `
                    <div class="bg-gray-900 rounded-lg p-4 border border-gray-700">
                        <div class="flex items-center space-x-3 mb-3">
                            <div class="w-8 h-8 ${platformColors[item.platform]} rounded flex items-center justify-center">
                                <span class="text-xs font-bold text-white">${item.platform.charAt(0).toUpperCase()}</span>
                            </div>
                            <div class="flex-1">
                                <h4 class="font-semibold text-sm">${item.platform.charAt(0).toUpperCase() + item.platform.slice(1)}</h4>
                                <p class="text-xs text-gray-400">${date} at ${time}</p>
                            </div>
                            <div class="text-green-400">
                                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                                    <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"/>
                                </svg>
                            </div>
                        </div>
                        <div class="text-xs text-gray-400">
                            <span>${item.format.toUpperCase()}</span> • 
                            <span>${item.quality.toUpperCase()}</span>
                        </div>
                    </div>
                `;
            }

            removeFromQueue(itemId) {
                const itemElement = document.getElementById(`download-${itemId}`);
                if (itemElement) {
                    itemElement.remove();
                }
                
                // Check if queue is empty
                const queueContainer = document.getElementById('download-queue');
                if (queueContainer.children.length === 0) {
                    queueContainer.innerHTML = `
                        <div class="text-center text-gray-500 py-12">
                            <svg class="w-16 h-16 mx-auto mb-4 opacity-50" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"/>
                            </svg>
                            <p>No downloads in queue</p>
                            <p class="text-sm mt-2">Add a URL above to start downloading</p>
                        </div>
                    `;
                }
            }

            clearQueue() {
                const queueContainer = document.getElementById('download-queue');
                queueContainer.innerHTML = `
                    <div class="text-center text-gray-500 py-12">
                        <svg class="w-16 h-16 mx-auto mb-4 opacity-50" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"/>
                        </svg>
                        <p>No downloads in queue</p>
                        <p class="text-sm mt-2">Add a URL above to start downloading</p>
                    </div>
                `;
            }

            clearHistory() {
                this.downloadHistory = [];
                this.saveHistory();
                this.updateHistoryDisplay();
            }

            loadHistory() {
                try {
                    const saved = localStorage.getItem('formgpt_download_history');
                    return saved ? JSON.parse(saved) : [];
                } catch (error) {
                    console.error('Failed to load history:', error);
                    return [];
                }
            }

            saveHistory() {
                try {
                    localStorage.setItem('formgpt_download_history', JSON.stringify(this.downloadHistory));
                } catch (error) {
                    console.error('Failed to save history:', error);
                }
            }
        }

        // Initialize downloader
        const downloader = new MediaDownloader();
    </script>
    <script src="main.js"></script>
</body>
</html>